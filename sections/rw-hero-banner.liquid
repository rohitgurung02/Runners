{%- assign sec_id = '#shopify-section-' | append: section.id -%}
{%- assign parts = sec_id | split: '_' -%}
{%- assign last_lower = parts | last -%}
{%- assign last_part = last_lower | downcase -%}

<pc-hero-section-{{ last_part }} class="pc-hero-section-{{ last_part }}">
  <div class="pc-hero-content-{{ last_part }}">
    <h1 class="pc-hero-title-{{ last_part }}">Welcome <strong class="pc-hero-strong-{{ last_part }}">{{ section.settings.heading_highlight }}</strong></h1>
    <p class="pc-hero-text-{{ last_part }}">{{ section.settings.description }}</p>
    <button class="pc-hero-button-{{ last_part }}" aria-label="{{ section.settings.button_label }}">
      {{ section.settings.button_label }}
    </button>
  </div>

  <div class="pc-hero-divider-{{ last_part }}">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
      <defs>
        <radialGradient id="pc-radial-{{ last_part }}" cx="30%" cy="30%" r="80%">
          <stop offset="0%" stop-color="{{ section.settings.gradient_color_1 }}" stop-opacity="0.8" />
          <stop offset="40%" stop-color="{{ section.settings.gradient_color_2 }}" />
          <stop offset="100%" stop-color="{{ section.settings.gradient_color_3 }}" />
        </radialGradient>
      </defs>
      <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" fill="url(#pc-radial-{{ last_part }})" class="pc-squiggle-{{ last_part }}"></path>
      <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="url(#pc-radial-{{ last_part }})" class="pc-squiggle-alt-{{ last_part }}"></path>
    </svg>
  </div>
</pc-hero-section-{{ last_part }}>

<style>
  {{ sec_id }} .pc-hero-section-{{ last_part }} {
    position: relative;
    min-height: 40vh;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  {{ sec_id }} .pc-hero-content-{{ last_part }} {
    padding: {{ section.settings.mobile_padding_top }}px 1rem 8rem 1rem;
    max-width: 48rem;
    width: 100%;
  }

  {{ sec_id }} .pc-hero-title-{{ last_part }} {
    font-family: var(--pc-font-secondary-{{ last_part }});
    font-size: {{ section.settings.mobile_title_size }}px;
    font-weight: 400;
    display: flex;
    flex-direction: column;
    color: {{ section.settings.text_color }};
  }

  {{ sec_id }} .pc-hero-strong-{{ last_part }} {
    font-size: {{ section.settings.mobile_highlight_size }}px;
    text-transform: uppercase;
    margin: -0.7rem 0 1rem 0;
    color: {{ section.settings.highlight_color }};
  }

  {{ sec_id }} .pc-hero-text-{{ last_part }} {
    font-size: {{ section.settings.mobile_text_size }}px;
    margin-bottom: 1rem;
    color: {{ section.settings.text_color }};
  }

  {{ sec_id }} .pc-hero-button-{{ last_part }} {
    font-family: var(--pc-font-primary-{{ last_part }});
    font-size: {{ section.settings.mobile_button_size }}px;
    padding: 0.5rem 1rem;
    border: 1px solid {{ section.settings.button_border_color }};
    background-color: transparent;
    cursor: pointer;
    border-radius: 35px;
    transition: all 0.2s ease-in-out;
    color: {{ section.settings.button_text_color }};
  }

  {{ sec_id }} .pc-hero-button-{{ last_part }}:hover {
    background-color: {{ section.settings.button_hover_color }};
    color: {{ section.settings.button_hover_text_color }};
  }

  {{ sec_id }} .pc-hero-divider-{{ last_part }} {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    line-height: 0;
    transform: rotate(180deg);
  }

  {{ sec_id }} .pc-hero-divider-{{ last_part }} svg {
    position: relative;
    display: block;
    width: calc(147% + 1.3px);
    height: 200px;
  }

  {{ sec_id }} .pc-squiggle-alt-{{ last_part }} {
    visibility: hidden;
  }

  @media (min-width: 768px) {
    {{ sec_id }} .pc-hero-content-{{ last_part }} {
      padding: {{ section.settings.desktop_padding_top }}px 1rem 8rem 1rem;
    }

    {{ sec_id }} .pc-hero-title-{{ last_part }} {
      font-size: {{ section.settings.desktop_title_size }}px;
    }

    {{ sec_id }} .pc-hero-strong-{{ last_part }} {
      font-size: {{ section.settings.desktop_highlight_size }}px;
    }

    {{ sec_id }} .pc-hero-text-{{ last_part }} {
      font-size: {{ section.settings.desktop_text_size }}px;
    }

    {{ sec_id }} .pc-hero-button-{{ last_part }} {
      font-size: {{ section.settings.desktop_button_size }}px;
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", (event) => {
    const sectionElement = document.querySelector('pc-hero-section-{{ last_part }}');
    if (!sectionElement) return;

    {% if section.settings.enable_animation %}
    function initWaveAnimation() {
      const firstWave = sectionElement.querySelector('.pc-squiggle-{{ last_part }}');
      const secondWave = sectionElement.querySelector('.pc-squiggle-alt-{{ last_part }}');
      
      if (!firstWave || !secondWave) return;

      // Check if GSAP is loaded
      if (typeof gsap !== 'undefined') {
        // Check if MorphSVGPlugin is available
        if (typeof MorphSVGPlugin !== 'undefined') {
          gsap.to(firstWave, {
            duration: 2,
            repeat: -1,
            yoyo: true,
            ease: "power2.inOut",
            morphSVG: secondWave
          });
        } else {
          console.warn('MorphSVGPlugin not loaded for pc-hero-section-{{ last_part }}');
          // Fallback - just show the first wave
          secondWave.style.visibility = 'hidden';
          firstWave.style.visibility = 'visible';
        }
      } else {
        // GSAP not loaded - load it dynamically
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js';
        script.onload = function() {
          const morphScript = document.createElement('script');
          morphScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/MorphSVGPlugin.min.js';
          morphScript.onload = initWaveAnimation;
          document.head.appendChild(morphScript);
        };
        document.head.appendChild(script);
      }
    }

    initWaveAnimation();
    {% endif %}
  });
</script>

{% schema %}
{
  "name": "PWC - Hero Banner #1",
  "class": "shopify-section--pc-hero-squiggles",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading_highlight",
      "label": "Heading Highlight Text",
      "default": "Squiggles"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer sodales arcu eu libero varius, sed."
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "Learn More"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#171716"
    },
    {
      "type": "color",
      "id": "highlight_color",
      "label": "Highlight Color",
      "default": "#1468E5"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#171716"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button Border Color",
      "default": "#171716"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button Hover Background",
      "default": "#171716"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button Hover Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "gradient_color_1",
      "label": "Gradient Color 1",
      "default": "#1468E5"
    },
    {
      "type": "color",
      "id": "gradient_color_2",
      "label": "Gradient Color 2",
      "default": "#14E5CD"
    },
    {
      "type": "color",
      "id": "gradient_color_3",
      "label": "Gradient Color 3",
      "default": "#26079C"
    },
    {
      "type": "header",
      "content": "Typography Settings"
    },
    {
      "type": "select",
      "id": "font_primary",
      "label": "Primary Font",
      "options": [
        {
          "value": "Arial, sans-serif",
          "label": "Arial"
        },
        {
          "value": "'Helvetica Neue', sans-serif",
          "label": "Helvetica"
        },
        {
          "value": "Georgia, serif",
          "label": "Georgia"
        }
      ],
      "default": "Arial, sans-serif"
    },
    {
      "type": "select",
      "id": "font_secondary",
      "label": "Secondary Font",
      "options": [
        {
          "value": "Arial, sans-serif",
          "label": "Arial"
        },
        {
          "value": "'Helvetica Neue', sans-serif",
          "label": "Helvetica"
        },
        {
          "value": "Georgia, serif",
          "label": "Georgia"
        }
      ],
      "default": "Georgia, serif"
    },
    {
      "type": "header",
      "content": "Desktop Settings"
    },
    {
      "type": "range",
      "id": "desktop_padding_top",
      "label": "Top Padding",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "desktop_title_size",
      "label": "Title Font Size",
      "min": 12,
      "max": 72,
      "step": 1,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "desktop_highlight_size",
      "label": "Highlight Font Size",
      "min": 12,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "desktop_text_size",
      "label": "Text Font Size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "desktop_button_size",
      "label": "Button Font Size",
      "min": 12,
      "max": 36,
      "step": 1,
      "unit": "px",
      "default": 24
    },
    {
      "type": "header",
      "content": "Mobile Settings"
    },
    {
      "type": "range",
      "id": "mobile_padding_top",
      "label": "Top Padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_title_size",
      "label": "Title Font Size",
      "min": 12,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "mobile_highlight_size",
      "label": "Highlight Font Size",
      "min": 12,
      "max": 72,
      "step": 1,
      "unit": "px",
      "default": 36
    },
    {
      "type": "range",
      "id": "mobile_text_size",
      "label": "Text Font Size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "range",
      "id": "mobile_button_size",
      "label": "Button Font Size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "header",
      "content": "Advanced"
    },
    {
      "type": "checkbox",
      "id": "enable_animation",
      "label": "Enable SVG Animation",
      "default": true,
      "info": "Requires GSAP and MorphSVGPlugin"
    }
  ],
  "presets": [
    {
      "name": "PWC - Hero Banner #1",
      "category": "Custom"
    }
  ]
}
{% endschema %}