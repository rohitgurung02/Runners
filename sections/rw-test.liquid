{%- assign sec_id = '#shopify-section-' | append: section.id -%}
{%- assign parts = sec_id | split: '_' -%}
{%- assign last_lower = parts | last -%}
{%- assign last_part = last_lower | downcase -%}

<pc-banner-cards-{{ last_part }} class="pc-banner-cards">
  {%- if section.settings.heading != blank -%}
    <h1 class="pc-banner-cards-heading">{{ section.settings.heading }}</h1>
  {%- endif -%}
  
  <ul class="pc-banner-cards-list">
    {%- for block in section.blocks -%}
      <li class="pc-banner-card" style="--accent-color:{{ block.settings.accent_color }}">
        <div class="pc-banner-card-icon">
          {%- render 'pc-banner-card-icon', icon: block.settings.icon -%}
        </div>
        <div class="pc-banner-card-title">{{ block.settings.title }}</div>
        <div class="pc-banner-card-descr">{{ block.settings.description }}</div>
      </li>
    {%- endfor -%}
  </ul>
</pc-banner-cards-{{ last_part }}>

<style>
  {{ sec_id }} .pc-banner-cards {
    width: 100%;
    padding: 20px;
  }
  
  {{ sec_id }} .pc-banner-cards-heading {
    text-align: center;
    margin-bottom: 30px;
    font-size: {{ section.settings.heading_size }}px;
    color: {{ section.settings.heading_color }};
  }
  
  {{ sec_id }} .pc-banner-cards-list {
    --col-gap: {{ section.settings.column_gap }}px;
    --barH: {{ section.settings.bar_height }}px;
    --roleH: {{ section.settings.role_height }}px;
    --flapH: {{ section.settings.flap_height }}px;
    
    width: min(60rem, 90%);
    margin-inline: auto;
    display: flex;
    flex-wrap: wrap;
    gap: var(--col-gap);
    padding-inline: calc(var(--col-gap) / 2);
    justify-content: center;
    align-items: flex-start;
    list-style: none;
  }
  
  {{ sec_id }} .pc-banner-card {
    width: {{ section.settings.card_width }}px;
    display: grid;
    grid-template:
      "role"
      "icon"
      "title"
      "descr";
    align-items: flex-start;
    gap: 1rem;
    padding-block-end: calc(var(--flapH) + 1rem);
    text-align: center;
    background-image: linear-gradient(
      rgba(0, 0, 0, 0.6) var(--roleH),
      rgba(0, 0, 0, 0.4) calc(var(--roleH) + 0.5rem),
      rgba(0, 0, 0, 0) calc(var(--roleH) + 0.5rem + 5rem)
    );
    clip-path: polygon(
      calc(var(--col-gap) / -2 - 5px) 0,
      calc(100% + var(--col-gap) / 2 + 5px) 0,
      calc(100% + var(--col-gap) / 2 + 5px ) calc(100% - var(--flapH)),
      50% 100%,
      calc(var(--col-gap) / -2 - 5px) calc(100% - var(--flapH))
    );
  }
  
  {{ sec_id }} .pc-banner-card::before {
    content: "";
    grid-area: role;
    height: var(--barH);
    width: calc(100% + var(--col-gap));
    margin-left: calc(var(--col-gap) / -2);
    margin-top: calc(var(--roleH) / 2 - var(--barH) / 2);
    background: grey;
    z-index: -1;
    background-image: linear-gradient(
      rgba(255, 255, 255, 0.4),
      rgba(255, 255, 255, 0.2) 30%,
      rgba(255, 255, 255, 0.1) 40%,
      rgba(0, 0, 0, 0.1) 60%,
      rgba(0, 0, 0, 0.2) 70%,
      rgba(0, 0, 0, 0.4)
    );
  }
  
  {{ sec_id }} .pc-banner-card::after {
    content: "";
    grid-area: role;
    background-image: linear-gradient(
      rgba(255, 255, 255, 0.4),
      rgba(255, 255, 255, 0.2) 30%,
      rgba(255, 255, 255, 0.1) 40%,
      rgba(0, 0, 0, 0.1) 60%,
      rgba(0, 0, 0, 0.2) 70%,
      rgba(0, 0, 0, 0.4)
    );
    height: var(--roleH);
  }
  
  {{ sec_id }} .pc-banner-card-icon,
  {{ sec_id }} .pc-banner-card-title,
  {{ sec_id }} .pc-banner-card-descr {
    padding-inline: 1rem;
    color: white;
    text-shadow: 0 0 0.5rem rgba(0, 0, 0, 0.5);
  }
  
  {{ sec_id }} .pc-banner-card-icon {
    font-size: 3rem;
  }
  
  {{ sec_id }} .pc-banner-card-title {
    font-size: 1.25rem;
    font-weight: 700;
  }
  
  {{ sec_id }} .pc-banner-card-descr {
    font-size: 0.9rem;
  }
  
  @media (max-width: 768px) {
    {{ sec_id }} .pc-banner-cards-list {
      --col-gap: {{ section.settings.mobile_column_gap }}px;
    }
    
    {{ sec_id }} .pc-banner-card {
      width: {{ section.settings.mobile_card_width }}px;
    }
  }
</style>


{% javascript %}
class PcBannerCards extends HTMLElement {
  constructor() {
    super();
    // Initialize any required JavaScript functionality here
  }
}
customElements.define('pc-banner-cards-{{ last_part }}', PcBannerCards);
{% endjavascript %}


{% schema %}
{
  "name": "PWC - Banner Cards #1",
  "settings": [
    {
      "type": "header",
      "content": "General Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "UL banner cards"
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "Heading Size",
      "min": 12,
      "max": 72,
      "step": 1,
      "unit": "px",
      "default": 24
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Desktop Settings"
    },
    {
      "type": "range",
      "id": "card_width",
      "label": "Card Width",
      "min": 100,
      "max": 500,
      "step": 10,
      "unit": "px",
      "default": 200
    },
    {
      "type": "range",
      "id": "column_gap",
      "label": "Column Gap",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 30
    },
    {
      "type": "range",
      "id": "bar_height",
      "label": "Bar Height",
      "min": 5,
      "max": 50,
      "step": 1,
      "unit": "px",
      "default": 10
    },
    {
      "type": "range",
      "id": "role_height",
      "label": "Role Height",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 30
    },
    {
      "type": "range",
      "id": "flap_height",
      "label": "Flap Height",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 30
    },
    {
      "type": "header",
      "content": "Mobile Settings"
    },
    {
      "type": "range",
      "id": "mobile_card_width",
      "label": "Mobile Card Width",
      "min": 80,
      "max": 300,
      "step": 10,
      "unit": "px",
      "default": 150
    },
    {
      "type": "range",
      "id": "mobile_column_gap",
      "label": "Mobile Column Gap",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "default": 15
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "codepen",
              "label": "Codepen"
            },
            {
              "value": "html5",
              "label": "HTML5"
            },
            {
              "value": "css3",
              "label": "CSS3"
            },
            {
              "value": "js",
              "label": "JavaScript"
            },
            {
              "value": "github",
              "label": "GitHub"
            }
          ],
          "default": "codepen"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Lorem ipsum dolor sit amet consectetur adipisicing elit."
        },
        {
          "type": "color",
          "id": "accent_color",
          "label": "Accent Color",
          "default": "#0B374D"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "PWC - Banner Cards #6",
      "category": "Custom",
      "blocks": [
        {
          "type": "card",
          "settings": {
            "icon": "codepen",
            "title": "Codepen",
            "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit.",
            "accent_color": "#0B374D"
          }
        },
        {
          "type": "card",
          "settings": {
            "icon": "html5",
            "title": "HTML5",
            "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit.",
            "accent_color": "#1286A8"
          }
        },
        {
          "type": "card",
          "settings": {
            "icon": "css3",
            "title": "CSS3",
            "description": "Lorem ipsum dolor sit amet.",
            "accent_color": "#D2B53B"
          }
        }
      ]
    }
  ]
}
{% endschema %}