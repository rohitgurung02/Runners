{%- assign sec_id = '#shopify-section-' | append: section.id -%}
{%- assign parts = sec_id | split: '_' -%}
{%- assign last_lower = parts | last -%}
{%- assign last_part = last_lower | downcase -%}

<pc-hero-slider-{{ last_part }} class="pc-hero-slider pc-hero-style-{{ last_part }}">
  <div class="pc-swiper-container-{{ last_part }}">
    <div class="pc-swiper-wrapper-{{ last_part }}">
      {%- for block in section.blocks -%}
        <div class="pc-swiper-slide-{{ last_part }}" {{ block.shopify_attributes }}>
          <div class="pc-slide-inner-{{ last_part }} pc-slide-bg-image-{{ last_part }}" 
               data-background="{% if block.settings.image != blank %}{{ block.settings.image | image_url: width: 2000 }}{% else %}https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1500{% endif %}">
            <div class="pc-slide-overlay-{{ last_part }}"></div>
            <div class="pc-container-{{ last_part }}">
              <div data-swiper-parallax="300" class="pc-slide-title-{{ last_part }}">
                <h2>{{ block.settings.title }}</h2>
              </div>
              <div data-swiper-parallax="400" class="pc-slide-text-{{ last_part }}">
                <p>{{ block.settings.text }}</p>
              </div>
              <div class="pc-clearfix-{{ last_part }}"></div>
              <div data-swiper-parallax="500" class="pc-slide-btns-{{ last_part }}">
                <a href="{{ block.settings.button_link }}" class="pc-theme-btn-s2-{{ last_part }}">{{ block.settings.button_text }}</a>
              </div>
            </div>
          </div>
        </div>
      {%- endfor -%}
    </div>

    <div class="pc-swiper-pagination-{{ last_part }}"></div>
    <div class="pc-swiper-button-next-{{ last_part }}">{% render 'pc-arrow-right', last_part: last_part %}</div>
    <div class="pc-swiper-button-prev-{{ last_part }}">{% render 'pc-arrow-left', last_part: last_part %}</div>
  </div>
</pc-hero-slider-{{ last_part }}>

<style>
  {{ sec_id }} .pc-hero-slider {
    width: 100%;
    height: {{ section.settings.slider_height_desktop }}px;
    display: flex;
    position: relative;
    z-index: 0;
  }

  {{ sec_id }} .pc-swiper-container-{{ last_part }} {
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
  }

  {{ sec_id }} .pc-swiper-slide-{{ last_part }} {
    overflow: hidden;
    color: #fff;
  }

  {{ sec_id }} .pc-slide-inner-{{ last_part }} {
    width: 100%;
    height: 100%;
    position: absolute;
    background-size: cover;
    background-position: center;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: left;
  }

  {{ sec_id }} .pc-slide-overlay-{{ last_part }} {
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, rgba(26, 26, 46, {{ section.settings.overlay_opacity }}), rgba(26, 26, 46, {{ section.settings.overlay_opacity | plus: 0.3 }}));
    z-index: 1;
  }

  {{ sec_id }} .pc-hero-style-{{ last_part }} {
    height: {{ section.settings.slider_height_desktop }}px;
    transition: all 0.4s ease;
  }

  {{ sec_id }} .pc-container-{{ last_part }} {
    width: {{ section.settings.container_width_desktop }}px;
    padding: 0 15px;
    margin: 0 auto;
    position: relative;
    z-index: 2;
  }

  {{ sec_id }} .pc-slide-title-{{ last_part }},
  {{ sec_id }} .pc-slide-text-{{ last_part }},
  {{ sec_id }} .pc-slide-btns-{{ last_part }} {
    max-width: {{ section.settings.content_max_width_desktop }}px;
  }

  {{ sec_id }} .pc-slide-title-{{ last_part }} h2 {
    font-size: {{ section.settings.title_size_desktop }}px;
    font-weight: {{ section.settings.title_weight }};
    color: {{ section.settings.title_color }};
    margin-bottom: {{ section.settings.title_margin_bottom }}px;
    text-transform: {{ section.settings.title_transform }};
    text-shadow: 1px 2px 4px rgba(0, 0, 0, 0.6);
    font-family: {{ section.settings.font_family }};
  }

  {{ sec_id }} .pc-slide-text-{{ last_part }} p {
    font-size: {{ section.settings.text_size_desktop }}px;
    font-weight: {{ section.settings.text_weight }};
    opacity: 0.85;
    margin-bottom: {{ section.settings.text_margin_bottom }}px;
    color: {{ section.settings.text_color }};
    text-shadow: 1px 2px 4px rgba(0, 0, 0, 0.6);
    font-family: {{ section.settings.font_family }};
  }

  {{ sec_id }} .pc-theme-btn-s2-{{ last_part }} {
    background-color: {{ section.settings.button_bg_color }};
    color: {{ section.settings.button_text_color }};
    font-size: {{ section.settings.button_font_size }}px;
    font-weight: {{ section.settings.button_font_weight }};
    padding: {{ section.settings.button_padding_vertical }}px {{ section.settings.button_padding_horizontal }}px;
    border: none;
    border-radius: {{ section.settings.button_border_radius }}px;
    text-transform: uppercase;
    display: inline-block;
    transition: all 0.3s ease;
    font-family: {{ section.settings.font_family }};
  }

  {{ sec_id }} .pc-theme-btn-s2-{{ last_part }}:hover {
    background-color: {{ section.settings.button_hover_bg_color }};
    color: {{ section.settings.button_hover_text_color }};
  }

  {{ sec_id }} .pc-swiper-button-prev-{{ last_part }},
  {{ sec_id }} .pc-swiper-button-next-{{ last_part }} {
    width: {{ section.settings.arrow_size }}px;
    height: {{ section.settings.arrow_size }}px;
    border-radius: 50%;
    border: 2px solid {{ section.settings.arrow_color }};
    background: transparent;
    text-align: center;
    line-height: {{ section.settings.arrow_size | minus: 4 }}px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    color: {{ section.settings.arrow_color }};
    display: flex;
    align-items: center;
    justify-content: center;
  }

  {{ sec_id }} .pc-hero-slider:hover .pc-swiper-button-prev-{{ last_part }},
  {{ sec_id }} .pc-hero-slider:hover .pc-swiper-button-next-{{ last_part }} {
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
  }

  {{ sec_id }} .pc-swiper-button-prev-{{ last_part }} {
    left: {{ section.settings.arrow_offset }}px;
    transform: translateX(50px);
  }

  {{ sec_id }} .pc-swiper-button-next-{{ last_part }} {
    right: {{ section.settings.arrow_offset }}px;
    transform: translateX(-50px);
  }

  {{ sec_id }} .pc-swiper-pagination-{{ last_part }} {
    text-align: left;
  }

  {{ sec_id }} .pc-swiper-container-horizontal > .pc-swiper-pagination-{{ last_part }} {
    bottom: {{ section.settings.pagination_bottom }}px;
    left: 50%;
    transform: translateX(-50%);
    max-width: {{ section.settings.container_width_desktop }}px;
    padding: 0 15px;
    margin: 0 auto;
  }

  {{ sec_id }} .pc-swiper-pagination-bullet {
    width: {{ section.settings.pagination_size }}px;
    height: {{ section.settings.pagination_size }}px;
    background: {{ section.settings.pagination_color }};
    opacity: 0.4;
    transition: opacity 0.2s ease;
  }

  {{ sec_id }} .pc-swiper-pagination-bullet-active {
    opacity: 1;
  }

  @media (max-width: 1200px) {
    {{ sec_id }} .pc-container-{{ last_part }} {
      width: {{ section.settings.container_width_tablet }}px;
    }
    
    {{ sec_id }} .pc-slide-title-{{ last_part }} h2 {
      font-size: {{ section.settings.title_size_tablet }}px;
    }
    
    {{ sec_id }} .pc-slide-text-{{ last_part }} p {
      font-size: {{ section.settings.text_size_tablet }}px;
    }
    
    {{ sec_id }} .pc-hero-slider {
      height: {{ section.settings.slider_height_tablet }}px;
    }
  }

  @media (max-width: 768px) {
    {{ sec_id }} .pc-container-{{ last_part }} {
      width: {{ section.settings.container_width_mobile }}px;
    }
    
    {{ sec_id }} .pc-slide-title-{{ last_part }} h2 {
      font-size: {{ section.settings.title_size_mobile }}px;
    }
    
    {{ sec_id }} .pc-slide-text-{{ last_part }} p {
      font-size: {{ section.settings.text_size_mobile }}px;
    }
    
    {{ sec_id }} .pc-theme-btn-s2-{{ last_part }} {
      font-size: {{ section.settings.button_font_size_mobile }}px;
      padding: {{ section.settings.button_padding_vertical_mobile }}px {{ section.settings.button_padding_horizontal_mobile }}px;
    }
    
    {{ sec_id }} .pc-hero-slider {
      height: {{ section.settings.slider_height_mobile }}px;
    }
    
    {{ sec_id }} .pc-swiper-button-prev-{{ last_part }},
    {{ sec_id }} .pc-swiper-button-next-{{ last_part }} {
      display: none;
    }
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  if (typeof window.pcHeroSliders === 'undefined') {
    window.pcHeroSliders = {};
  }
  
  window.pcHeroSliders['{{ last_part }}'] = function() {
    // Set background images
    const slideBgImages = document.querySelectorAll('.pc-slide-bg-image-{{ last_part }}');
    slideBgImages.forEach(function(el) {
      const backgroundUrl = el.getAttribute('data-background');
      if (backgroundUrl) {
        el.style.backgroundImage = `url(${backgroundUrl})`;
      }
    });
    
    // Initialize Swiper if available
    if (typeof Swiper !== 'undefined') {
      const INTERLEAVE_OFFSET = 0.5;
      const TRANSITION_SPEED = 1000;
      
      const swiperOptions = {
        loop: true,
        speed: TRANSITION_SPEED,
        parallax: true,
        autoplay: {
          delay: {{ section.settings.autoplay_delay }},
          disableOnInteraction: false
        },
        watchSlidesProgress: true,
        pagination: {
          el: '.pc-swiper-pagination-{{ last_part }}',
          clickable: true
        },
        navigation: {
          nextEl: '.pc-swiper-button-next-{{ last_part }}',
          prevEl: '.pc-swiper-button-prev-{{ last_part }}'
        },
        on: {
          progress: function() {
            const swiper = this;
            const slides = swiper.slides;
            const width = swiper.width;
            const innerOffset = width * INTERLEAVE_OFFSET;
            
            requestAnimationFrame(function() {
              for (let i = 0; i < slides.length; i++) {
                const slide = slides[i];
                const slideProgress = slide.progress;
                const innerTranslate = slideProgress * innerOffset;
                const slideInner = slide.querySelector('.pc-slide-inner-{{ last_part }}');
                
                if (slideInner) {
                  slideInner.style.transform = `translate3d(${innerTranslate}px, 0, 0)`;
                }
              }
            });
          },
          touchStart: function() {
            const swiper = this;
            for (let i = 0; i < swiper.slides.length; i++) {
              const slide = swiper.slides[i];
              slide.style.transition = '';
              const slideInner = slide.querySelector('.pc-slide-inner-{{ last_part }}');
              if (slideInner) slideInner.style.transition = '';
            }
          },
          setTransition: function(speed) {
            const swiper = this;
            const transitionValue = speed + 'ms';
            
            for (let i = 0; i < swiper.slides.length; i++) {
              const slide = swiper.slides[i];
              slide.style.transition = transitionValue;
              const slideInner = slide.querySelector('.pc-slide-inner-{{ last_part }}');
              if (slideInner) slideInner.style.transition = transitionValue;
            }
          }
        }
      };
      
      const swiper = new Swiper('.pc-swiper-container-{{ last_part }}', swiperOptions);
    } else {
      console.warn('Swiper library not loaded. Hero slider will not function properly.');
    }
  };
  
  // Initialize the slider
  window.pcHeroSliders['{{ last_part }}']();
});

// Handle resize events
window.addEventListener('resize', function() {
  if (window.pcHeroSliders && window.pcHeroSliders['{{ last_part }}']) {
    // Re-initialize on resize to handle responsive changes
    setTimeout(function() {
      window.pcHeroSliders['{{ last_part }}']();
    }, 300);
  }
});
</script>

{% schema %}
{
  "name": "PWC - Hero Slider #1",
  "class": "pc-hero-slider-section",
  "max_blocks": 5,
  "settings": [
    {
      "type": "header",
      "content": "General Settings"
    },
    {
      "type": "range",
      "id": "slider_height_desktop",
      "label": "Slider Height (Desktop)",
      "min": 400,
      "max": 1000,
      "step": 10,
      "unit": "px",
      "default": 700
    },
    {
      "type": "range",
      "id": "slider_height_tablet",
      "label": "Slider Height (Tablet)",
      "min": 400,
      "max": 900,
      "step": 10,
      "unit": "px",
      "default": 600
    },
    {
      "type": "range",
      "id": "slider_height_mobile",
      "label": "Slider Height (Mobile)",
      "min": 300,
      "max": 700,
      "step": 10,
      "unit": "px",
      "default": 500
    },
    {
      "type": "range",
      "id": "container_width_desktop",
      "label": "Container Width (Desktop)",
      "min": 800,
      "max": 1400,
      "step": 20,
      "unit": "px",
      "default": 1200
    },
    {
      "type": "range",
      "id": "container_width_tablet",
      "label": "Container Width (Tablet)",
      "min": 700,
      "max": 1200,
      "step": 20,
      "unit": "px",
      "default": 900
    },
    {
      "type": "range",
      "id": "container_width_mobile",
      "label": "Container Width (Mobile)",
      "min": 300,
      "max": 700,
      "step": 10,
      "unit": "px",
      "default": 500
    },
    {
      "type": "range",
      "id": "content_max_width_desktop",
      "label": "Content Max Width (Desktop)",
      "min": 400,
      "max": 1000,
      "step": 20,
      "unit": "px",
      "default": 700
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay Opacity",
      "min": 0.1,
      "max": 0.9,
      "step": 0.1,
      "default": 0.6
    },
    {
      "type": "range",
      "id": "autoplay_delay",
      "label": "Autoplay Delay",
      "min": 50,
      "max": 1000,
      "step": 10,
      "unit": "ms",
      "default": 600
    },
    {
      "type": "header",
      "content": "Typography Settings"
    },
    {
      "type": "select",
      "id": "font_family",
      "label": "Font Family",
      "options": [
        {
          "value": "'Rajdhani', sans-serif",
          "label": "Rajdhani"
        },
        {
          "value": "Arial, sans-serif",
          "label": "Arial"
        },
        {
          "value": "Georgia, serif",
          "label": "Georgia"
        },
        {
          "value": "'Times New Roman', serif",
          "label": "Times New Roman"
        }
      ],
      "default": "'Rajdhani', sans-serif"
    },
    {
      "type": "range",
      "id": "title_size_desktop",
      "label": "Title Size (Desktop)",
      "min": 30,
      "max": 120,
      "step": 2,
      "unit": "px",
      "default": 100
    },
    {
      "type": "range",
      "id": "title_size_tablet",
      "label": "Title Size (Tablet)",
      "min": 25,
      "max": 80,
      "step": 1,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "title_size_mobile",
      "label": "Title Size (Mobile)",
      "min": 20,
      "max": 50,
      "step": 2,
      "unit": "px",
      "default": 36
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title Font Weight",
      "options": [
        {
          "value": "300",
          "label": "Light"
        },
        {
          "value": "400",
          "label": "Regular"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "title_transform",
      "label": "Title Text Transform",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "uppercase",
          "label": "Uppercase"
        },
        {
          "value": "capitalize",
          "label": "Capitalize"
        },
        {
          "value": "lowercase",
          "label": "Lowercase"
        }
      ],
      "default": "capitalize"
    },
    {
      "type": "range",
      "id": "title_margin_bottom",
      "label": "Title Margin Bottom",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "text_size_desktop",
      "label": "Text Size (Desktop)",
      "min": 16,
      "max": 50,
      "step": 2,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "text_size_tablet",
      "label": "Text Size (Tablet)",
      "min": 14,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "text_size_mobile",
      "label": "Text Size (Mobile)",
      "min": 12,
      "max": 30,
      "step": 2,
      "unit": "px",
      "default": 18
    },
    {
      "type": "select",
      "id": "text_weight",
      "label": "Text Font Weight",
      "options": [
        {
          "value": "300",
          "label": "Light"
        },
        {
          "value": "400",
          "label": "Regular"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        }
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#f0f0f0"
    },
    {
      "type": "range",
      "id": "text_margin_bottom",
      "label": "Text Margin Bottom",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 40
    },
    {
      "type": "header",
      "content": "Button Settings"
    },
    {
      "type": "range",
      "id": "button_font_size",
      "label": "Button Font Size",
      "min": 12,
      "max": 30,
      "step": 1,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "button_font_size_mobile",
      "label": "Button Font Size (Mobile)",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "select",
      "id": "button_font_weight",
      "label": "Button Font Weight",
      "options": [
        {
          "value": "400",
          "label": "Regular"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Button Background Color",
      "default": "#ff6f61"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_bg_color",
      "label": "Button Hover Background Color",
      "default": "#d4574e"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button Hover Text Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "label": "Button Vertical Padding",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "px",
      "default": 10
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "label": "Button Horizontal Padding",
      "min": 10,
      "max": 50,
      "step": 2,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "button_padding_vertical_mobile",
      "label": "Button Vertical Padding (Mobile)",
      "min": 5,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "button_padding_horizontal_mobile",
      "label": "Button Horizontal Padding (Mobile)",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "label": "Button Border Radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 4
    },
    {
      "type": "header",
      "content": "Navigation Settings"
    },
    {
      "type": "range",
      "id": "arrow_size",
      "label": "Arrow Size",
      "min": 30,
      "max": 80,
      "step": 5,
      "unit": "px",
      "default": 55
    },
    {
      "type": "color",
      "id": "arrow_color",
      "label": "Arrow Color",
      "default": "#f0f0f0"
    },
    {
      "type": "range",
      "id": "arrow_offset",
      "label": "Arrow Offset",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 25
    },
    {
      "type": "range",
      "id": "pagination_size",
      "label": "Pagination Size",
      "min": 6,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "color",
      "id": "pagination_color",
      "label": "Pagination Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "pagination_bottom",
      "label": "Pagination Bottom Position",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 50
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Slide Background Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Slide Title",
          "default": "BUILD YOUR DIGITAL PRESENCE"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Slide Text",
          "default": "We create beautiful websites & powerful strategies to grow your business."
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Start Your Project"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "PWC - Hero Slider #1",
      "category": "Custom",
      "blocks": [
        {
          "type": "slide",
          "settings": {
            "title": "BUILD YOUR DIGITAL PRESENCE",
            "text": "We create beautiful websites & powerful strategies to grow your business.",
            "button_text": "Start Your Project"
          }
        },
        {
          "type": "slide",
          "settings": {
            "title": "DESIGN THAT CONNECTS",
            "text": "Captivating visuals, seamless UX, and meaningful storytelling — all in one place.",
            "button_text": "View Our Work"
          }
        },
        {
          "type": "slide",
          "settings": {
            "title": "WE CRAFT BRANDS THAT MATTER",
            "text": "From identity to launch — we're your partner in every step of the journey.",
            "button_text": "Book a Free Call"
          }
        }
      ]
    }
  ]
}
{% endschema %}