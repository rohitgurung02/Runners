{%- assign sec_id = '#shopify-section-' | append: section.id -%}
{%- assign parts = sec_id | split: '_' -%}
{%- assign last_lower = parts | last -%}
{%- assign last_part = last_lower | downcase -%}

<style>
  {{ sec_id }} .pc-jewelry-categories-{{ last_part }} {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: {{ section.settings.desktop_gap }}px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  {{ sec_id }} .pc-jewelry-category-{{ last_part }} {
    position: relative;
    display: flex;
    flex-direction: column;
    height: {{ section.settings.desktop_height }}px;
    overflow: hidden;
    text-decoration: none;
    {% if section.settings.enable_shadow %}
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    {% endif %}
  }

  {{ sec_id }} .pc-jewelry-category-image-{{ last_part }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  {{ sec_id }} .pc-jewelry-category-overlay-{{ last_part }} {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0,0,0,0.5);
    padding: 15px;
    text-align: center;
  }

  {{ sec_id }} .pc-jewelry-category-title-{{ last_part }} {
    color: {{ section.settings.category_text_color }};
    font-size: {{ section.settings.desktop_font_size }}px;
    font-weight: {{ section.settings.font_weight }};
    text-transform: uppercase;
    letter-spacing: {{ section.settings.letter_spacing }}px;
    margin: 0;
    transition: all 0.3s ease;
  }

  {{ sec_id }} .pc-jewelry-category-{{ last_part }}:hover .pc-jewelry-category-image-{{ last_part }} {
    transform: scale(1.05);
  }

  {{ sec_id }} .pc-jewelry-category-{{ last_part }}:hover .pc-jewelry-category-title-{{ last_part }} {
    color: {{ section.settings.category_hover_text_color }};
  }

  @media (max-width: 768px) {
    {{ sec_id }} .pc-jewelry-categories-{{ last_part }} {
      grid-template-columns: 1fr;
      gap: {{ section.settings.mobile_gap }}px;
    }

    {{ sec_id }} .pc-jewelry-category-{{ last_part }} {
      height: {{ section.settings.mobile_height }}px;
    }

    {{ sec_id }} .pc-jewelry-category-title-{{ last_part }} {
      font-size: {{ section.settings.mobile_font_size }}px;
    }
  }
</style>

<pc-jewelry-categories-{{ last_part }} class="pc-jewelry-categories-{{ last_part }}">
  {% for block in section.blocks %}
    <a href="{{ block.settings.link }}" class="pc-jewelry-category-{{ last_part }}" {{ block.shopify_attributes }}>
      {%- if block.settings.image != blank -%}
        {% assign image_class = 'pc-jewelry-category-image-' | append: last_part %}
        {{ 
          block.settings.image
          | image_url: width: 800
          | image_tag: 
              loading: 'lazy',
              class: image_class,
              alt: block.settings.title
        }}
      {%- else -%}
        {{ 'product-' | append: forloop.index | placeholder_svg_tag: 'pc-jewelry-category-image-' | append: last_part }}
      {%- endif -%}
      <div class="pc-jewelry-category-overlay-{{ last_part }}">
        <h3 class="pc-jewelry-category-title-{{ last_part }}">{{ block.settings.title | default: 'Category' }}</h3>
      </div>
    </a>
  {% endfor %}
</pc-jewelry-categories-{{ last_part }}>

{% schema %}
{
  "name": "PWC - Jewelry Grid #1",
  "max_blocks": 4,
  "settings": [
    {
      "type": "header",
      "content": "General Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_shadow",
      "label": "Enable Shadow",
      "default": false
    },
    {
      "type": "header",
      "content": "Typography Settings"
    },
    {
      "type": "range",
      "id": "desktop_font_size",
      "label": "Desktop Font Size",
      "min": 12,
      "max": 36,
      "step": 1,
      "unit": "px",
      "default": 18
    },
    {
      "type": "range",
      "id": "mobile_font_size",
      "label": "Mobile Font Size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "select",
      "id": "font_weight",
      "label": "Font Weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600"
    },
    {
      "type": "range",
      "id": "letter_spacing",
      "label": "Letter Spacing",
      "min": 0,
      "max": 5,
      "step": 0.1,
      "unit": "px",
      "default": 1
    },
    {
      "type": "header",
      "content": "Color Settings"
    },
    {
      "type": "color",
      "id": "category_text_color",
      "label": "Category Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "category_hover_text_color",
      "label": "Hover Text Color",
      "default": "#f5f5f5"
    },
    {
      "type": "header",
      "content": "Spacing Settings"
    },
    {
      "type": "range",
      "id": "desktop_gap",
      "label": "Desktop Gap Between Items",
      "min": 10,
      "max": 50,
      "step": 1,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_gap",
      "label": "Mobile Gap Between Items",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "desktop_height",
      "label": "Desktop Item Height",
      "min": 200,
      "max": 500,
      "step": 10,
      "unit": "px",
      "default": 300
    },
    {
      "type": "range",
      "id": "mobile_height",
      "label": "Mobile Item Height",
      "min": 150,
      "max": 400,
      "step": 10,
      "unit": "px",
      "default": 200
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Category",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Category Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Category Title",
          "default": "Category Name"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Category Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "PWC - Jewelry Grid #1",
      "category": "Custom",
      "blocks": [
        {
          "type": "category",
          "settings": {
            "title": "Bracelets"
          }
        },
        {
          "type": "category",
          "settings": {
            "title": "Earrings"
          }
        },
        {
          "type": "category",
          "settings": {
            "title": "Rings"
          }
        },
        {
          "type": "category",
          "settings": {
            "title": "Necklaces"
          }
        }
      ]
    }
  ]
}
{% endschema %}