{% style %}
  .txt-par1-hd--{{ section.id }} {
    color: #fff;
    margin: 0 0 15px;
  }
  .txt-par1-subhd--{{ section.id }} {
    color: #fff;
    margin: 0 0 20px;
  }
  .par1_button--{{ section.id }} {
    border-color: #fff;
    background: transparent;
    color: #fff;
    padding: 12px 24px;
    text-decoration: none;
    display: inline-block;
    transition: all 0.3s ease;
  }
  .par1_button--{{ section.id }}:hover {
    background: rgba(255,255,255,0.1);
  }

  @media only screen and (max-width: 767px) {
    .parallax--{{ section.id }} {
      background-attachment: scroll !important;
    }
  }

  @media only screen and (min-width: 768px) {
    .txt-par1-hd--{{ section.id }} {
      font-size: {{ section.settings.par_hd_sz }}px;
      letter-spacing: {{ section.settings.par_letter_sp }}px;
      font-weight: bold;
    }
    .txt-par1-subhd--{{ section.id }} {
      font-size: {{ section.settings.par_subhd_sz }}px;
      letter-spacing: {{ section.settings.par_letter_sp }}px;
    }
    .parallax--{{ section.id }} a {
      font-size: {{ section.settings.par_button_sz }}px;
      letter-spacing: {{ section.settings.par_letter_sp }}px;
    }
    .parallax--{{ section.id }} {
      position: relative;
      z-index: 1;
      height: {{ section.settings.par_img_sz }}px;
    }
    .parallax-over--{{ section.id }}::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: {{ section.settings.color_over }};
      opacity: {{ section.settings.par_opacity }}%;
      z-index: 1;
    }
    .text-block--{{ section.id }} {
      position: absolute;
      text-align: {{ section.settings.par_txt_align }};
      top: {{ section.settings.par_txt_top_pos }}%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: inline-block;
      width: 90%;
      max-width: 1200px;
      z-index: 2;
    }
  }
{% endstyle %}

<div class="{% if section.settings.paral-full == blank %}page-width{% endif %}">
  {% for block in section.blocks limit: section.blocks.size %}
    {% if block.settings.image != blank %}
      <div class="parallax--{{ section.id }} {% if section.settings.par-en-over %}parallax-over--{{ section.id}}{% endif %} lazyload"
        style="background-repeat: no-repeat;
               background-attachment: fixed;
               background-position: center center;
               background-size: cover;"
        data-bgset="{% include 'responsive-bg-image', image: block.settings.image %}"
        data-sizes="auto"
        data-parent-fit="cover"
        title="{{ block.settings.image.alt | escape }}">
        
        <div class="text-block--{{ section.id }}">
          {% if block.settings.txt1-hd1 != blank %}
            {% if block.settings.parallax-h == 'h1' %}
              <h1 class="txt-par1-hd--{{ section.id }} {{ block.settings.par1_hd }}">{{ block.settings.txt1-hd1 }}</h1>
            {% elsif section.settings.parallax-h == 'h2' %}
              <h2 class="txt-par1-hd--{{ section.id }} {{ block.settings.par1_hd }}">{{ block.settings.txt1-hd1 }}</h2>
            {% else %}
              <h3 class="txt-par1-hd--{{ section.id }} {{ block.settings.par1_hd }}">{{ block.settings.txt1-hd1 }}</h3>
            {% endif %}
          {% endif %}
          
          {% if block.settings.txt1-hd2 != blank %}
            {% if section.settings.parallax-subh == 'h2' %}
              <h2 class="txt-par1-subhd--{{ section.id }} {{ block.settings.par1_subhd }}">{{ block.settings.txt1-hd2 }}</h2>
            {% else %}
              <h3 class="txt-par1-subhd--{{ section.id }} {{ block.settings.par1_subhd }}">{{ block.settings.txt1-hd2 }}</h3>
            {% endif %}
          {% endif %}
          
          {% if block.settings.par1_showbutton %}
            <a class="par1_button--{{ section.id }} btn btn--tertiary btn--small {{ block.settings.par1_button_pos }}" 
               href="{{ block.settings.par1_button_link }}" 
               title="{{ block.settings.par1_button_link | truncate: 22 }}">
              {{ block.settings.par1_button_label | escape }}
            </a>
          {% endif %}
        </div>
      </div>
    {% else %}
      <div class="parallax--{{ section.id }} placeholder-background">
        {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
        <div class="text-block--{{ section.id }}">
          <h2 class="txt-par1-hd--{{ section.id }} h2">Parallax Section</h2>
          <h3 class="txt-par1-subhd--{{ section.id }} h3">Add an image to this section</h3>
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>

{% schema %}
{
  "name": "Parallax Section",
  "class": "index-section",
  "settings": [
    {
      "type": "checkbox",
      "id": "paral-full",
      "label": "Full width",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "par-en-over",
      "label": "Enable overlay",
      "default": false
    },
    {
      "type": "select",
      "id": "parallax-h",
      "label": "Heading tag",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        }
      ],
      "default": "h2"
    },
    {
      "type": "select",
      "id": "parallax-subh",
      "label": "Subheading tag",
      "options": [
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        }
      ],
      "default": "h3"
    },
    {
      "type": "range",
      "id": "par_hd_sz",
      "label": "Heading font size",
      "min": 12,
      "max": 72,
      "step": 1,
      "unit": "px",
      "default": 36
    },
    {
      "type": "range",
      "id": "par_subhd_sz",
      "label": "Subheading font size",
      "min": 12,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "par_button_sz",
      "label": "Button font size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "par_letter_sp",
      "label": "Letter spacing",
      "min": 0,
      "max": 10,
      "step": 0.1,
      "unit": "px",
      "default": 1
    },
    {
      "type": "range",
      "id": "par_img_sz",
      "label": "Section height",
      "min": 200,
      "max": 1000,
      "step": 10,
      "unit": "px",
      "default": 500
    },
    {
      "type": "color",
      "id": "color_over",
      "label": "Overlay color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "par_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 30
    },
    {
      "type": "select",
      "id": "par_txt_align",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "par_txt_top_pos",
      "label": "Text vertical position",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 50
    }
  ],
  "blocks": [
    {
      "type": "parallax",
      "name": "Parallax Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "Recommended size: 1920x1080px (for best parallax effect)"
        },
        {
          "type": "text",
          "id": "txt1-hd1",
          "label": "Heading",
          "default": "Heading"
        },
        {
          "type": "select",
          "id": "par1_hd",
          "label": "Heading style",
          "options": [
            {
              "value": "h1",
              "label": "H1"
            },
            {
              "value": "h2",
              "label": "H2"
            },
            {
              "value": "h3",
              "label": "H3"
            },
            {
              "value": "h4",
              "label": "H4"
            },
            {
              "value": "h5",
              "label": "H5"
            },
            {
              "value": "h6",
              "label": "H6"
            }
          ],
          "default": "h2"
        },
        {
          "type": "text",
          "id": "txt1-hd2",
          "label": "Subheading",
          "default": "Subheading"
        },
        {
          "type": "select",
          "id": "par1_subhd",
          "label": "Subheading style",
          "options": [
            {
              "value": "h1",
              "label": "H1"
            },
            {
              "value": "h2",
              "label": "H2"
            },
            {
              "value": "h3",
              "label": "H3"
            },
            {
              "value": "h4",
              "label": "H4"
            },
            {
              "value": "h5",
              "label": "H5"
            },
            {
              "value": "h6",
              "label": "H6"
            }
          ],
          "default": "h3"
        },
        {
          "type": "checkbox",
          "id": "par1_showbutton",
          "label": "Show button",
          "default": false
        },
        {
          "type": "text",
          "id": "par1_button_label",
          "label": "Button label",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "par1_button_link",
          "label": "Button link"
        },
        {
          "type": "select",
          "id": "par1_button_pos",
          "label": "Button position",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "center"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Parallax Section",
      "category": "Image",
      "blocks": [
        {
          "type": "parallax"
        }
      ]
    }
  ]
}
{% endschema %}