{%- assign sec_id = '#shopify-section-' | append: section.id -%}

{%- liquid
  assign main_text = section.settings.main_text
  assign emoji = section.settings.emoji 
  assign secondary_text =  section.settings.secondary_text
  assign speed = section.settings.speed
-%}

<style>
  {{ sec_id }} .pc-marquee-horizontal {
    overflow: hidden;
    position: relative;
    border: 1px solid black;
  }
  
  {{ sec_id }} .pc-track-horizontal-alt {
    height: 72px;
    display: flex;
    align-items: center;
    width: fit-content; /* Important for smooth animation */
    will-change: transform;
  }
  
  {{ sec_id }} .pc-marquee-element {
    margin-right: 40px;
    flex-shrink: 0; /* Prevent elements from shrinking */
    margin-top: 10px;
  }
  
  {{ sec_id }} .pc-marquee_text {
    font-size: 42px;
    line-height: 50px
  }

  {{ sec_id }} .pc-marquee-element span {
    font-size: 42px;
    font-weight: 600;
    line-height: 50px;
  }
  
  @keyframes smooth-scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
  
  {{ sec_id }} .pc-track-horizontal-alt {
    animation: smooth-scroll {{ speed }}s linear infinite;
  }
</style>

 

<div class="pc-marquee-horizontal tw-relative tw-flex tw-overflow-hidden tw-w-full tw-justify-start tw-items-center">
  <div class="pc-track-horizontal-alt" style="--marquee-speed: {{ block.settings.speed }}s;">
    <!-- Render blocks content twice for seamless looping -->
    
      {%- for block in section.blocks -%}
          {%- assign empty_column = '' -%}
          {%- if block.settings.main_text == blank
            
          -%}
            {%- assign empty_column = ' multicolumn-list__item--empty' -%}
          {%- endif -%}
         {%- endfor -%}
 
  </div>
</div>

{% javascript %}
document.addEventListener('DOMContentLoaded', function() {
  // JavaScript for marquee functionality if needed
});
{% endjavascript %}

{% schema %}
{
  "name": "Marquee Scroller",
  "settings": [],
  "blocks": [
    {
      "type": "marquee_item",
      "name": "Marquee Item",
      "settings": [
        {
          "type": "text",
          "id": "main_text",
          "label": "Main Text",
          "default": "Main Text"
        },
        {
          "type": "text",
          "id": "emoji",
          "label": "Emoji/Symbol",
          "default": "ðŸš€"
        },
        {
          "type": "richtext",
          "id": "secondary_text",
          "label": "Secondary Text",
          "default": "<p>Secondary Text</p>"
        },
        {
          "type": "range",
          "id": "speed",
          "min": 5,
          "max": 30,
          "step": 1,
          "unit": "s",
          "label": "Animation Speed",
          "default": 12
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "PWC - Scrolling Marquee",
      "blocks": [
        {
          "type": "marquee_item",
          "settings": {
            "main_text": "Main Text",
            "emoji": "ðŸŒŸ",
            "secondary_text": "<p>Secondary Text</p>",
            "speed": 12
          }
        }
      ]
    }
  ]
}
{% endschema %}
